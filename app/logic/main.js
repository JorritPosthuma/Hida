angular.module("hida", ['ui.router', 'inspinia']).config(function($stateProvider, $urlRouterProvider) {
  $stateProvider.state("main", {
    abstract: true,
    templateUrl: "parts/main.html",
    controller: "MainController"
  }).state("main.home", {
    url: "/home",
    templateUrl: "parts/home.html",
    controller: "HomeController"
  }).state("main.export", {
    url: "/export",
    templateUrl: "parts/export.html",
    controller: "ExportController"
  }).state("login", {
    url: "/login",
    templateUrl: "parts/login.html"
  });
  return $urlRouterProvider.otherwise("/home");
});

var DefaultController;

DefaultController = (function() {
  function DefaultController(scope, root) {
    this.scope = scope;
    this.root = root;
    this.scope.root = this.root;
    this.scope.ctrl = this;
    this.init();
    this.scope.$on('$destroy', this.destroy);
  }

  DefaultController.prototype.init = function() {};

  DefaultController.prototype.destroy = function() {};

  return DefaultController;

})();

var DicomFileReader, color_interpretations,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

color_interpretations = ["RGB", "PALETTE COLOR", "YBR_FULL", "YBR_FULL_422", "YBR_PARTIAL_422", "YBR_PARTIAL_420", "YBR_RCT"];

DicomFileReader = (function() {
  var frames;

  frames = [];

  function DicomFileReader(path) {
    this.path = path;
    this.get = __bind(this.get, this);
    this._load = __bind(this._load, this);
    this._metadata = __bind(this._metadata, this);
    this._read = __bind(this._read, this);
    this.isColorImage = __bind(this.isColorImage, this);
    this.fs = require("fs");
    this._read();
    this._metadata();
    this._load();
  }

  DicomFileReader.prototype.isColorImage = function(color) {};

  DicomFileReader.prototype._read = function() {
    var buffer;
    buffer = this.fs.readFileSync(this.path);
    return this.dataSet = dicomParser.parseDicom(new Uint8Array(buffer));
  };

  DicomFileReader.prototype._metadata = function() {
    this.framecount = this.dataSet.string("x00280008") || 1;
    this.color_int = this.dataSet.string("x00280004");
    return this.is_color = -1 !== color_interpretations.indexOf(this.color_int);
  };

  DicomFileReader.prototype._load = function() {
    var frame_id, method;
    method = this.is_color ? cornerstoneWADOImageLoader.makeColorImage : cornerstoneWADOImageLoader.makeGrayscaleImage;
    return this.frames = (function() {
      var _i, _ref, _results;
      _results = [];
      for (frame_id = _i = 0, _ref = this.framecount - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; frame_id = 0 <= _ref ? ++_i : --_i) {
        _results.push(method("" + this.path + "_" + frame_id, this.dataSet, this.dataSet.byteArray, this.color_int, frame_id));
      }
      return _results;
    }).call(this);
  };

  DicomFileReader.prototype.get = function(frame) {
    return this.frames[frame - 1];
  };

  return DicomFileReader;

})();

var module;

module = angular.module('hida');

module.filter('log', function() {
  return function(data) {
    console.log(data);
    return data;
  };
});

module.filter('print', function() {
  return function(data) {
    return JSON.stringify(data);
  };
});

module.filter('replace', function() {
  return function(text, a, b) {
    return text.replace(a, b);
  };
});

var module,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

module = angular.module('hida');

module.controller('ExportController', function($scope, $rootScope) {
  return new ((function(_super) {
    __extends(_Class, _super);

    function _Class() {
      _Class.__super__.constructor.call(this, $scope, $rootScope);
    }

    return _Class;

  })(DefaultController));
});

var module,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

module = angular.module('hida');

module.controller('HomeController', function($scope, $rootScope) {
  return new ((function(_super) {
    __extends(_Class, _super);

    _Class.prototype.ww = 0;

    _Class.prototype.wl = 0;

    _Class.prototype.frames = 1;

    _Class.prototype.color = 'No color';

    _Class.prototype.frame = 100;

    function _Class() {
      this.open = __bind(this.open, this);
      this.show = __bind(this.show, this);
      this.image = __bind(this.image, this);
      this.register = __bind(this.register, this);
      this.loaded = __bind(this.loaded, this);
      this.init = __bind(this.init, this);
      _Class.__super__.constructor.call(this, $scope, $rootScope);
      this.image("/Users/Jorrit/Development/Hida Private/Patientdata/ANONHBSAMCHERMES1/HIDASPECTFASE2RECONSCAC/1.2.752.37.1.1.3407820023.6.166606720130905");
      this.viewport.voi.windowWidth = 185;
      this.viewport.voi.windowCenter = 84;
      cornerstone.setViewport(this.element, this.viewport);
    }

    _Class.prototype.init = function() {
      this.$element = $('.dicom');
      this.element = this.$element[0];
      this.$document = $(document);
      cornerstone.enable(this.element);
      return this.register();
    };

    _Class.prototype.loaded = function() {
      return this.viewport != null;
    };

    _Class.prototype.register = function() {
      this.$element.bind('mousewheel', (function(_this) {
        return function(e) {
          var direction;
          e.preventDefault();
          if (!_this.loaded()) {
            return;
          }
          direction = e.originalEvent.wheelDelta;
          if (direction > 0) {
            if (_this.frame > 1) {
              _this.frame = _this.frame - 1;
              return _this.show();
            }
          } else {
            if (_this.frame < _this.frames) {
              _this.frame = _this.frame + 1;
              return _this.show();
            }
          }
        };
      })(this));
      return this.$element.mousedown((function(_this) {
        return function(e) {
          var lastX, lastY;
          if (!_this.loaded()) {
            return;
          }
          lastX = e.pageX;
          lastY = e.pageY;
          _this.$document.mousemove(function(e) {
            var deltaX, deltaY;
            deltaX = e.pageX - lastX;
            deltaY = e.pageY - lastY;
            lastX = e.pageX;
            lastY = e.pageY;
            _this.viewport.voi.windowWidth += deltaX / _this.viewport.scale;
            _this.viewport.voi.windowCenter += deltaY / _this.viewport.scale;
            cornerstone.setViewport(_this.element, _this.viewport);
            _this.ww = Math.round(_this.viewport.voi.windowWidth);
            _this.wl = Math.round(_this.viewport.voi.windowCenter);
            return _this.scope.$apply();
          });
          return _this.$document.mouseup(function(e) {
            _this.$document.unbind("mousemove");
            return _this.$document.unbind("mouseup");
          });
        };
      })(this));
    };

    _Class.prototype.image = function(file) {
      this.reader = new DicomFileReader(file);
      return this.show();
    };

    _Class.prototype.show = function() {
      return this.reader.get(this.frame).then((function(_this) {
        return function(image) {
          cornerstone.displayImage(_this.element, image);
          _this.viewport = cornerstone.getViewport(_this.element);
          _this.ww = _this.viewport.voi.windowWidth;
          _this.wl = _this.viewport.voi.windowCenter;
          _this.color = _this.reader.color_int;
          _this.frames = _this.reader.framecount;
          return _this.scope.$apply();
        };
      })(this));
    };

    _Class.prototype.open = function() {
      var file, self;
      file = $('#file');
      self = this;
      file.change(function() {
        return self.image($(this).val());
      });
      file.click();
      return false;
    };

    return _Class;

  })(DefaultController));
});

var module,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

module = angular.module('hida');

module.controller('LoginController', function($scope, $rootScope) {
  return new ((function(_super) {
    __extends(_Class, _super);

    function _Class() {
      _Class.__super__.constructor.call(this, $scope, $rootScope);
    }

    return _Class;

  })(DefaultController));
});

var module,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

module = angular.module('hida');

module.controller('MainController', function($scope, $rootScope, $state) {
  return new ((function(_super) {
    __extends(_Class, _super);

    function _Class() {
      _Class.__super__.constructor.call(this, $scope, $rootScope);
      $scope.$state = $state;
    }

    return _Class;

  })(DefaultController));
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIiwiY29udHJvbGxlci5jb2ZmZWUiLCJkaWNvbS5jb2ZmZWUiLCJmaWx0ZXJzLmNvZmZlZSIsInBhcnRzL2V4cG9ydC5jb2ZmZWUiLCJwYXJ0cy9ob21lLmNvZmZlZSIsInBhcnRzL2xvZ2luLmNvZmZlZSIsInBhcnRzL21haW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sQ0FBQyxNQUFSLENBQWUsTUFBZixFQUF1QixDQUFFLFdBQUYsRUFBZSxVQUFmLENBQXZCLENBRUEsQ0FBQyxNQUZELENBRVEsU0FBQyxjQUFELEVBQWlCLGtCQUFqQixHQUFBO0FBQ04sRUFBQSxjQUNBLENBQUMsS0FERCxDQUNPLE1BRFAsRUFFRTtBQUFBLElBQUEsUUFBQSxFQUFVLElBQVY7QUFBQSxJQUNBLFdBQUEsRUFBYSxpQkFEYjtBQUFBLElBRUEsVUFBQSxFQUFZLGdCQUZaO0dBRkYsQ0FLQSxDQUFDLEtBTEQsQ0FLTyxXQUxQLEVBTUU7QUFBQSxJQUFBLEdBQUEsRUFBSyxPQUFMO0FBQUEsSUFDQSxXQUFBLEVBQWEsaUJBRGI7QUFBQSxJQUVBLFVBQUEsRUFBWSxnQkFGWjtHQU5GLENBU0EsQ0FBQyxLQVRELENBU08sYUFUUCxFQVVFO0FBQUEsSUFBQSxHQUFBLEVBQUssU0FBTDtBQUFBLElBQ0EsV0FBQSxFQUFhLG1CQURiO0FBQUEsSUFFQSxVQUFBLEVBQVksa0JBRlo7R0FWRixDQWFBLENBQUMsS0FiRCxDQWFPLE9BYlAsRUFjRTtBQUFBLElBQUEsR0FBQSxFQUFLLFFBQUw7QUFBQSxJQUNBLFdBQUEsRUFBYSxrQkFEYjtHQWRGLENBQUEsQ0FBQTtTQWlCQSxrQkFBa0IsQ0FBQyxTQUFuQixDQUE2QixPQUE3QixFQWxCTTtBQUFBLENBRlIsQ0FBQSxDQUFBOztBQ0FBLElBQUEsaUJBQUE7O0FBQUE7QUFFZSxFQUFBLDJCQUFFLEtBQUYsRUFBVSxJQUFWLEdBQUE7QUFDWCxJQURZLElBQUMsQ0FBQSxRQUFBLEtBQ2Is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QUFDWCxNQUFBLHdDQUFNLE1BQU4sRUFBYyxVQUFkLENBQUEsQ0FEVztJQUFBLENBQWI7O2tCQUFBOztLQVZnQixvQkFGaUI7QUFBQSxDQUFyQyxDQURBLENBQUE7O0FDQUEsSUFBQSxNQUFBO0VBQUE7aVNBQUE7O0FBQUEsTUFBQSxHQUFTLE9BQU8sQ0FBQyxNQUFSLENBQWUsTUFBZixDQUFULENBQUE7O0FBQUEsTUFDTSxDQUFDLFVBQVAsQ0FBa0IsZ0JBQWxCLEVBQW9DLFNBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsTUFBckIsR0FBQTtTQUVsQyxHQUFBLENBQUE7QUFVRSw2QkFBQSxDQUFBOztBQUFhLElBQUEsZ0JBQUEsR0FBQTtBQUNYLE1BQUEsd0NBQU0sTUFBTixFQUFjLFVBQWQsQ0FBQSxDQUFBO0FBQUEsTUFFQSxNQUFNLENBQUMsTUFBUCxHQUFnQixNQUZoQixDQURXO0lBQUEsQ0FBYjs7a0JBQUE7O0tBVmdCLG9CQUZnQjtBQUFBLENBQXBDLENBREEsQ0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUgXCJoaWRhXCIsIFsgJ3VpLnJvdXRlcicsICdpbnNwaW5pYScgXVxuXG4uY29uZmlnICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSAtPlxuICAkc3RhdGVQcm92aWRlclxuICAuc3RhdGUgXCJtYWluXCIsXG4gICAgYWJzdHJhY3Q6IHRydWVcbiAgICB0ZW1wbGF0ZVVybDogXCJwYXJ0cy9tYWluLmh0bWxcIlxuICAgIGNvbnRyb2xsZXI6IFwiTWFpbkNvbnRyb2xsZXJcIlxuICAuc3RhdGUgXCJtYWluLmhvbWVcIixcbiAgICB1cmw6IFwiL2hvbWVcIlxuICAgIHRlbXBsYXRlVXJsOiBcInBhcnRzL2hvbWUuaHRtbFwiXG4gICAgY29udHJvbGxlcjogXCJIb21lQ29udHJvbGxlclwiXG4gIC5zdGF0ZSBcIm1haW4uZXhwb3J0XCIsXG4gICAgdXJsOiBcIi9leHBvcnRcIlxuICAgIHRlbXBsYXRlVXJsOiBcInBhcnRzL2V4cG9ydC5odG1sXCJcbiAgICBjb250cm9sbGVyOiBcIkV4cG9ydENvbnRyb2xsZXJcIlxuICAuc3RhdGUgXCJsb2dpblwiLFxuICAgIHVybDogXCIvbG9naW5cIlxuICAgIHRlbXBsYXRlVXJsOiBcInBhcnRzL2xvZ2luLmh0bWxcIlxuXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UgXCIvaG9tZVwiIiwiY2xhc3MgRGVmYXVsdENvbnRyb2xsZXJcblxuICBjb25zdHJ1Y3RvcjogKEBzY29wZSwgQHJvb3QpIC0+XG4gICAgQHNjb3BlLnJvb3QgPSBAcm9vdFxuICAgIEBzY29wZS5jdHJsID0gQFxuXG4gICAgQGluaXQoKVxuXG4gICAgQHNjb3BlLiRvbiAnJGRlc3Ryb3knLCBAZGVzdHJveVxuXG4gIGluaXQ6IC0+XG5cbiAgZGVzdHJveTogLT4iLCJjb2xvcl9pbnRlcnByZXRhdGlvbnMgPSBbXG4gIFwiUkdCXCJcbiAgXCJQQUxFVFRFIENPTE9SXCIgXG4gIFwiWUJSX0ZVTExcIiBcbiAgXCJZQlJfRlVMTF80MjJcIlxuICBcIllCUl9QQVJUSUFMXzQyMlwiIFxuICBcIllCUl9QQVJUSUFMXzQyMFwiIFxuICBcIllCUl9SQ1RcIlxuXVxuXG5jbGFzcyBEaWNvbUZpbGVSZWFkZXJcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgIyBJbnN0YW5jZSB2YXJpYWJsZXMgICAgICAjXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG4gIGZyYW1lcyA9IFtdXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgQ29uc3RydWN0b3IgICAgICAgICAgICAgI1xuICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICBjb25zdHJ1Y3RvcjogKEBwYXRoKSAtPlxuICAgIEBmcyA9IHJlcXVpcmUgXCJmc1wiXG5cbiAgICBAX3JlYWQoKVxuICAgIEBfbWV0YWRhdGEoKVxuICAgIEBfbG9hZCgpXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgTWV0aG9kcyAgICAgICAgICAgICAgICAgI1xuICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICBpc0NvbG9ySW1hZ2U6IChjb2xvcikgPT4gXG5cbiAgX3JlYWQ6ID0+XG4gICAgYnVmZmVyICA9IEBmcy5yZWFkRmlsZVN5bmMgQHBhdGhcbiAgICBAZGF0YVNldCA9IGRpY29tUGFyc2VyLnBhcnNlRGljb20gbmV3IFVpbnQ4QXJyYXkgYnVmZmVyXG5cbiAgX21ldGFkYXRhOiA9PlxuICAgIEBmcmFtZWNvdW50ID0gQGRhdGFTZXQuc3RyaW5nKFwieDAwMjgwMDA4XCIpIHx8IDFcbiAgICBAY29sb3JfaW50ICA9IEBkYXRhU2V0LnN0cmluZyhcIngwMDI4MDAwNFwiKVxuICAgIEBpc19jb2xvciAgID0gLTEgaXNudCBjb2xvcl9pbnRlcnByZXRhdGlvbnMuaW5kZXhPZiBAY29sb3JfaW50XG5cbiAgX2xvYWQ6ID0+XG4gICAgbWV0aG9kID0gaWYgQGlzX2NvbG9yXG4gICAgdGhlbiBjb3JuZXJzdG9uZVdBRE9JbWFnZUxvYWRlci5tYWtlQ29sb3JJbWFnZVxuICAgIGVsc2UgY29ybmVyc3RvbmVXQURPSW1hZ2VMb2FkZXIubWFrZUdyYXlzY2FsZUltYWdlXG5cbiAgICBAZnJhbWVzID0gZm9yIGZyYW1lX2lkIGluIFswLi5AZnJhbWVjb3VudCAtIDFdXG4gICAgICBtZXRob2QgXCIje0BwYXRofV8je2ZyYW1lX2lkfVwiLCBAZGF0YVNldCwgQGRhdGFTZXQuYnl0ZUFycmF5LCBAY29sb3JfaW50LCBmcmFtZV9pZFxuXG4gIGdldDogKGZyYW1lKSA9PiBAZnJhbWVzW2ZyYW1lIC0gMV0iLCJtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSAnaGlkYSdcblxubW9kdWxlLmZpbHRlciAnbG9nJywgICAgIC0+IChkYXRhKSAtPiBjb25zb2xlLmxvZyBkYXRhOyBkYXRhXG5tb2R1bGUuZmlsdGVyICdwcmludCcsICAgLT4gKGRhdGEpIC0+IEpTT04uc3RyaW5naWZ5IGRhdGFcblxubW9kdWxlLmZpbHRlciAncmVwbGFjZScsIC0+ICh0ZXh0LCBhLCBiKSAtPiB0ZXh0LnJlcGxhY2UgYSwgYiIsIm1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlICdoaWRhJ1xubW9kdWxlLmNvbnRyb2xsZXIgJ0V4cG9ydENvbnRyb2xsZXInLCAoJHNjb3BlLCAkcm9vdFNjb3BlKSAtPlxuXG4gIG5ldyBjbGFzcyBleHRlbmRzIERlZmF1bHRDb250cm9sbGVyXG5cbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAjIEluc3RhbmNlIHZhcmlhYmxlcyAgICAgICNcbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgICMgY29uc3RydWN0b3IgJiBpbml0ICAgICAgI1xuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG4gICAgY29uc3RydWN0b3I6IC0+XG4gICAgICBzdXBlciAkc2NvcGUsICRyb290U2NvcGVcblxuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgICMgTWV0aG9kcyAgICAgICAgICAgICAgICAgI1xuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyIsIm1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlICdoaWRhJ1xubW9kdWxlLmNvbnRyb2xsZXIgJ0hvbWVDb250cm9sbGVyJywgKCRzY29wZSwgJHJvb3RTY29wZSkgLT5cblxuICBuZXcgY2xhc3MgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlclxuXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgIyBJbnN0YW5jZSB2YXJpYWJsZXMgICAgICAjXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbiAgICB3dzogMFxuICAgIHdsOiAwXG4gICAgZnJhbWVzOiAxXG4gICAgY29sb3I6ICdObyBjb2xvcidcblxuICAgIGZyYW1lOiAxMDBcblxuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgICMgY29uc3RydWN0b3IgICAgICAgICAgICAgI1xuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG4gICAgY29uc3RydWN0b3I6IC0+XG4gICAgICBzdXBlciAkc2NvcGUsICRyb290U2NvcGVcblxuICAgICAgIyBERUJVR1xuICAgICAgQGltYWdlIFwiL1VzZXJzL0pvcnJpdC9EZXZlbG9wbWVudC9IaWRhIFByaXZhdGUvUGF0aWVudGRhdGEvQU5PTkhCU0FNQ0hFUk1FUzEvSElEQVNQRUNURkFTRTJSRUNPTlNDQUMvMS4yLjc1Mi4zNy4xLjEuMzQwNzgyMDAyMy42LjE2NjYwNjcyMDEzMDkwNVwiXG4gICAgICBAdmlld3BvcnQudm9pLndpbmRvd1dpZHRoID0gMTg1XG4gICAgICBAdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciA9IDg0XG4gICAgICBjb3JuZXJzdG9uZS5zZXRWaWV3cG9ydCBAZWxlbWVudCwgQHZpZXdwb3J0XG5cbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAjIE1ldGhvZHMgICAgICAgICAgICAgICAgICNcbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICAgIGluaXQ6ID0+XG4gICAgICBAJGVsZW1lbnQgPSAkKCcuZGljb20nKVxuICAgICAgQGVsZW1lbnQgPSBAJGVsZW1lbnRbMF1cbiAgICAgIEAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KVxuXG4gICAgICBjb3JuZXJzdG9uZS5lbmFibGUgQGVsZW1lbnRcbiAgICAgIEByZWdpc3RlcigpXG5cbiAgICBsb2FkZWQ6ID0+IEB2aWV3cG9ydD9cblxuICAgIHJlZ2lzdGVyOiA9PlxuICAgICAgQCRlbGVtZW50LmJpbmQgJ21vdXNld2hlZWwnLCAoZSkgPT5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHJldHVybiBpZiBub3QgQGxvYWRlZCgpXG5cbiAgICAgICAgZGlyZWN0aW9uID0gZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGFcblxuICAgICAgICBpZiBkaXJlY3Rpb24gPiAwXG4gICAgICAgICAgaWYgQGZyYW1lID4gMVxuICAgICAgICAgICAgQGZyYW1lID0gQGZyYW1lIC0gMVxuICAgICAgICAgICAgQHNob3coKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgaWYgQGZyYW1lIDwgQGZyYW1lc1xuICAgICAgICAgICAgQGZyYW1lID0gQGZyYW1lICsgMVxuICAgICAgICAgICAgQHNob3coKVxuXG4gICAgICBAJGVsZW1lbnQubW91c2Vkb3duIChlKSA9PlxuICAgICAgICByZXR1cm4gaWYgbm90IEBsb2FkZWQoKVxuXG4gICAgICAgIGxhc3RYID0gZS5wYWdlWFxuICAgICAgICBsYXN0WSA9IGUucGFnZVlcblxuICAgICAgICBAJGRvY3VtZW50Lm1vdXNlbW92ZSAoZSkgPT5cbiAgICAgICAgICBkZWx0YVggPSBlLnBhZ2VYIC0gbGFzdFhcbiAgICAgICAgICBkZWx0YVkgPSBlLnBhZ2VZIC0gbGFzdFlcbiAgICAgICAgICBsYXN0WCA9IGUucGFnZVhcbiAgICAgICAgICBsYXN0WSA9IGUucGFnZVlcbiAgICAgICAgICBAdmlld3BvcnQudm9pLndpbmRvd1dpZHRoICs9IGRlbHRhWCAvIEB2aWV3cG9ydC5zY2FsZVxuICAgICAgICAgIEB2aWV3cG9ydC52b2kud2luZG93Q2VudGVyICs9IGRlbHRhWSAvIEB2aWV3cG9ydC5zY2FsZVxuICAgICAgICAgIGNvcm5lcnN0b25lLnNldFZpZXdwb3J0IEBlbGVtZW50LCBAdmlld3BvcnRcblxuICAgICAgICAgIEB3dyA9IE1hdGgucm91bmQgQHZpZXdwb3J0LnZvaS53aW5kb3dXaWR0aFxuICAgICAgICAgIEB3bCA9IE1hdGgucm91bmQgQHZpZXdwb3J0LnZvaS53aW5kb3dDZW50ZXJcbiAgICAgICAgICBAc2NvcGUuJGFwcGx5KClcblxuICAgICAgICBAJGRvY3VtZW50Lm1vdXNldXAgKGUpID0+XG4gICAgICAgICAgQCRkb2N1bWVudC51bmJpbmQgXCJtb3VzZW1vdmVcIlxuICAgICAgICAgIEAkZG9jdW1lbnQudW5iaW5kIFwibW91c2V1cFwiXG5cbiAgICBpbWFnZTogKGZpbGUpID0+XG4gICAgICBAcmVhZGVyID0gbmV3IERpY29tRmlsZVJlYWRlciBmaWxlXG4gICAgICBAc2hvdygpXG5cbiAgICBzaG93OiA9PlxuICAgICAgQHJlYWRlci5nZXQgQGZyYW1lXG4gICAgICAudGhlbiAoaW1hZ2UpID0+XG4gICAgICAgIGNvcm5lcnN0b25lLmRpc3BsYXlJbWFnZSBAZWxlbWVudCwgaW1hZ2VcbiAgICAgICAgQHZpZXdwb3J0ID0gY29ybmVyc3RvbmUuZ2V0Vmlld3BvcnQgQGVsZW1lbnRcblxuICAgICAgICBAd3cgPSBAdmlld3BvcnQudm9pLndpbmRvd1dpZHRoXG4gICAgICAgIEB3bCA9IEB2aWV3cG9ydC52b2kud2luZG93Q2VudGVyXG4gICAgICAgIEBjb2xvciA9IEByZWFkZXIuY29sb3JfaW50XG4gICAgICAgIEBmcmFtZXMgPSBAcmVhZGVyLmZyYW1lY291bnRcbiAgICAgICAgQHNjb3BlLiRhcHBseSgpXG5cbiAgICBvcGVuOiA9PlxuICAgICAgZmlsZSA9ICQoJyNmaWxlJylcbiAgICAgIHNlbGYgPSBAXG4gICAgICBmaWxlLmNoYW5nZSAtPiBzZWxmLmltYWdlICQoQCkudmFsKClcbiAgICAgIGZpbGUuY2xpY2soKVxuICAgICAgcmV0dXJuIGZhbHNlIiwibW9kdWxlID0gYW5ndWxhci5tb2R1bGUgJ2hpZGEnXG5tb2R1bGUuY29udHJvbGxlciAnTG9naW5Db250cm9sbGVyJywgKCRzY29wZSwgJHJvb3RTY29wZSkgLT5cblxuICBuZXcgY2xhc3MgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlclxuXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgIyBJbnN0YW5jZSB2YXJpYWJsZXMgICAgICAjXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAjIGNvbnN0cnVjdG9yICYgaW5pdCAgICAgICNcbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICAgIGNvbnN0cnVjdG9yOiAtPlxuICAgICAgc3VwZXIgJHNjb3BlLCAkcm9vdFNjb3BlXG5cbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAjIE1ldGhvZHMgICAgICAgICAgICAgICAgICNcbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiLCJtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSAnaGlkYSdcbm1vZHVsZS5jb250cm9sbGVyICdNYWluQ29udHJvbGxlcicsICgkc2NvcGUsICRyb290U2NvcGUsICRzdGF0ZSkgLT5cblxuICBuZXcgY2xhc3MgZXh0ZW5kcyBEZWZhdWx0Q29udHJvbGxlclxuXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICAgIyBJbnN0YW5jZSB2YXJpYWJsZXMgICAgICAjXG4gICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAjIGNvbnN0cnVjdG9yICYgaW5pdCAgICAgICNcbiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuICAgIGNvbnN0cnVjdG9yOiAtPlxuICAgICAgc3VwZXIgJHNjb3BlLCAkcm9vdFNjb3BlXG5cbiAgICAgICRzY29wZS4kc3RhdGUgPSAkc3RhdGVcblxuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgICMgTWV0aG9kcyAgICAgICAgICAgICAgICAgI1xuICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==